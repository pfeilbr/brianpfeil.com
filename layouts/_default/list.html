{{ define "main" }}
<h1 class="text-2xl font-bold text-gray-900 mb-6">
  {{ .Title }}
  {{ if eq .Kind "term" }}
  <span class="text-base font-normal text-gray-500">({{ len .Pages }})</span>
  {{ end }}
</h1>

{{ if eq .Kind "taxonomy" }}
<div class="flex flex-wrap gap-2">
  {{ range .Pages.ByTitle }}
  <a href="{{ .RelPermalink }}" class="inline-block px-3 py-1 bg-gray-100 text-sm text-gray-700 rounded-full hover:bg-brand hover:text-white no-underline transition-colors">
    {{ .Title }} <span class="text-gray-400">({{ len .Pages }})</span>
  </a>
  {{ end }}
</div>
{{ else }}

{{ $pag := .Paginate .Pages }}
{{ range $pag.Pages }}
<article class="post-preview py-4 border-b border-gray-100">
  <a href="{{ .RelPermalink }}" class="no-underline">
    <h2 class="text-base font-semibold text-gray-900 hover:text-brand mb-1">{{ .Title }}</h2>
  </a>
  <div class="text-xs text-gray-500 mb-1">
    <time datetime="{{ .Date.Format "2006-01-02" }}">{{ .Date.Format ($.Site.Params.dateFormat | default "January 2, 2006") }}</time>
    {{ with .Params.tags }}
    <span class="ml-2">{{ range $i, $t := . }}{{ if $i }}, {{ end }}<a href="/tags/{{ $t | urlize }}/" class="text-brand no-underline hover:underline">{{ $t }}</a>{{ end }}</span>
    {{ end }}
  </div>
  {{ with .Summary }}
  <p class="text-sm text-gray-600 m-0">{{ . | plainify | truncate 160 }}</p>
  {{ end }}
</article>
{{ end }}

{{ if or ($pag.HasPrev) ($pag.HasNext) }}
<nav class="flex justify-between items-center mt-8 text-sm">
  {{ if $pag.HasPrev }}
  <a href="{{ $pag.Prev.URL }}" class="text-brand hover:underline no-underline">&larr; Previous</a>
  {{ else }}
  <span></span>
  {{ end }}
  {{ if $pag.HasNext }}
  <a href="{{ $pag.Next.URL }}" class="text-brand hover:underline no-underline">Next &rarr;</a>
  {{ else }}
  <span></span>
  {{ end }}
</nav>
{{ end }}

{{ end }}
{{ end }}
